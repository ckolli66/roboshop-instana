name: Frontend Setup
hosts: all
become: true
tasks:
  - name: Install Nginx 1.24
    ansible.builtin.dnf:
      name: '@nginx:1.24'
      state: present

  - name: Remove html directory
    ansible.builtin.file:
      path: /usr/share/nginx/html/*
      state: absent

  - name: Copy Html directory
    ansible.builtin.copy:
      src: nginx.conf
      dest: /etc/nginx/nginx.conf

  - name: Run a command from within a specific directory
    ansible.builtin.shell:
      args:
        chdir: "/usr/share/nginx/html"

  - name : Download Source code
    ansible.builtin.unarchive:
      src: https://roboshop-artifacts.s3.amazonaws.com/frontend-v3.zip
      dest: /usr/share/nginx/html
      remote_src: yes

  - name: enable NGINX service
    ansible.builtin.service:
        name: nginx
        state: restarted
        enabled: true

